_pkgname=haapa
pkgname=haapa-git
pkgver=0.1
pkgrel=3
pkgdesc='A simple status program in C'
url='http://github.com/JuhaniImberg/haapa'
license=('MIT')
arch=('i686' 'x86_64')
depends=('libevent')
optdepends=(
  'libmpdclient: mpd support'
  'wireless_tools: wireless support'
  'alsa-lib: alsa support'
  'xorg-server: xsetrootwindowname support'
)
makedepends=('git' 'cmake')
conflicts=('haapa')
provides=('haapa')
source=('git://github.com/JuhaniImberg/haapa')
md5sums=('SKIP')
install=haapa.install

pkgver() {
	cd $_pkgname
	echo "0.$(git rev-list --count HEAD).$(git describe --always)"
}

build() {
	cd $_pkgname/build
    cmake ..
	make
}

package() {
	cd $_pkgname/build
	install -m755 -D haapa $pkgdir/usr/bin/haapa
	install -m644 -D LICENSE $pkgdir/usr/share/licenses/$pkgname/LICENSE
}
